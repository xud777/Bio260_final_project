<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Analysis of Yelp Reviews by xud777</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">An Analysis of Yelp Reviews</h1>
      <h2 class="project-tagline">Another Bio260 Final Project by Shihao Zhu and Xuezhi Dong</h2>
      <a href="https://github.com/xud777/Bio260_final_project" class="btn">View on GitHub</a>
      <a href="https://raw.githubusercontent.com/xud777/Bio260_final_project/gh-pages/stylesheets/Cleandata.csv" class="btn">Train Data (Boston)</a>
      <a href="https://raw.githubusercontent.com/xud777/Bio260_final_project/gh-pages/stylesheets/Cleandata_cambridge.csv" class="btn">Test Data (Cambridge)</a>
    </section>

    <section class="main-content">
      <iframe width="420" height="345" src="http://www.youtube.com/embed/agtL7kD35xw"></iframe>
    <img src="https://raw.githubusercontent.com/xud777/Bio260_final_project/gh-pages/images/yelp.png" alt="Yelp_logo" width="50%" height="50%">

<h3>
<a id="background-and-motivation" class="anchor" href="#background-and-motivation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Background and Motivation</h3>

<p>As one of our most used apps, Yelp provides us with useful information on restaurants' hours, food type, and price range. More importantly, we are able to instantly compare restaurants through user reviews that are conveniently displayed in a 5 star scale. In this project, we aim to use the skills we learned throughout the course to </p>

<ul>
<li>Obtain Yelp user review dataset by web scrapping</li>
<li>Cleaning up the data through wrangling </li>
<li>Visualize the data</li>
<li>Create a statistical model using data we have collected</li>
<li>Test the model we built with new data</li>
<li>Finally, communicate the results through website and webcast</li>
</ul>

<h3>
<a id="obtaining-data-web-scrapping-and-wrangling" class="anchor" href="#obtaining-data-web-scrapping-and-wrangling" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Obtaining Data: Web Scrapping and Wrangling</h3>

<p>We scrapped data from 1000 restaurants in Boston, which appeared in the first 10 pages of search results, using the Google Chrome extension called <a href="https://chrome.google.com/webstore/detail/web-scraper/jnhgnonknehpejjnehehllkliplmbmhn?hl=en">WebScraper</a>. </p>

<p>The raw output from the WebScrapper was quite messy and required extensive wrangling to obtain a final data set. For example, we used pattern recognition to identify the value for the WiFi attribute, which has three result on Yelp website: "Free", "No", and "Paid". We assigned 1 to restaurants with Free or Paid WiFi and 0 to those without WiFi. We then applied the same strategy to the remaining attributes. The detailed process of collecting, cleaning and reformating the data is well described in the final report. </p>

<h3>
<a id="exploratory-data-analysis-eda" class="anchor" href="#exploratory-data-analysis-eda" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Exploratory Data Analysis (EDA)</h3>

<p>We explored the wranggled dataset through EDA techniques. We found that majority of our ratings are 3.5-4.0. We then summarized the attributes in each rating category and graphed the data to see the trends. </p>
<img src="https://raw.githubusercontent.com/xud777/Bio260_final_project/gh-pages/images/Plot1.png" alt="Plot_1">
<p>Here are the descriptions of the attributes: </p>
<ul>
<li>Page - the page number that the restaurant appeared in</li>
<li>Raters - the number of users providing the rating for the restaurant</li>
<li>Takeout - percentage of restaurants providing takeout service</li>
<li>Alcohol - percentage of restaurants serving alcohol</li>
<li>Noise - percentage of restaurants that are listed as noisy</li>
</ul>
<p>Here is what we have noticed: </p>
<ul>
<li>Higher rated restaurants tend to appear earlier in the search, except 5.0 restaurants. This is suggest that the Yelp search algorithm tend to return higher rated restaurants first.</li>
<li>The more reviewers a restaurant has, the more likely it is to have a medium rating. This corresponds with the law of large numbers - the more samples we take, the more likely we are to approach the true mean. In this case, the more ratings (samples) we have, the less likely we get an extreme (2.0 or 5.0) rating.</li>
<li>The higher rated restaurants are less likely to offer takeout, serve alcohol or be noisy.</li>
</ul>

<h3>
<a id="geographic-distribution-of-yelp-ratings" class="anchor" href="#geographic-distribution-of-yelp-ratings" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Geographic Distribution of Yelp Ratings</h3>
<p>We then visualized Yelp Rating geographically in the city map of Boston using the ggmap package. Restaurants with >=4.5 stars in rating are in red and the rest are in blue</p>
<img src="https://raw.githubusercontent.com/xud777/Bio260_final_project/gh-pages/images/Map_Image.png" alt="Boston_map">
<p>There does not appear to be any obvious geographic clustering of highly rated restaurants (>=4.5 stars rating). However, it seems that East Boston has a greater number of highly rated restaurants compared to other areas.</p>

<h3>
<a id="modeling-yelp-review-ratings-with-regression" class="anchor" href="#modeling-yelp-review-ratings-with-regression" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Modeling Yelp Review Ratings with Regression</h3>
<p>We created a linear regression model to predict the continuous numberical ratings, which are the averages of all the ratings before converting to the final Yelp rating, which is in 0.5 increments on a 5 star scale. </p>
<p>We included the following predictor variables in our model: </p>
<ul>
<li>Whether the restaurants take reservation</li>
<li>The page number it appears in</li>
<li>The total number of user reviews</li>
<li>Whether it delivers</li>
<li>Whether it provides takeout service</li>
<li>Whether it takes credit card</li>
<li>Whether there is WiFi</li>
<li>Whether there is TV</li> 
<li>whether there is outside seating</li>
<li>Whether it serves alcohol</li>
<li>Whether is is reported as noisy</li>
</ul>
<p>To see how good our model is, we first used our model on our training (Boston) dataset and examined how well we could predict the ratings.</p>
<img src="https://raw.githubusercontent.com/xud777/Bio260_final_project/gh-pages/images/Prediction_Boston.png" alt="Boston_Predict">
<p>Our predicted values had a 0.635 correlation with the observed values, which is not bad :). </p>
<p>We also created a logistic regression model to predict the whether the restaurant achieved a >=4.5 star rating. The predictor variables are the same as our linear model. The model is verified by Hosmer and Lemeshow Goodness of Fit test with P-value > 0.05. Therefore, we do not have sufficient evidence to reject the null hypothesis that the prediction is the same as the observations.</p>
<p>Our logistic regression model accurately predicted 86.6% (866 out of 1000 restaurants) of the binary outcomes variable correct (either < or >=4.5 stars).</p>

<h3>
<a id="testing-regression-model-with-a-New-Dataset" class="anchor" href="#testing-regression-model-with-a-New-Dataset" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Testing Regression Model</h3>
<p>In order to test our model, we scrapped another 201 restaurants from Cambridge as our test set. The data were wrangled in the identical fashion as the Boston restaurants. </p>
<p>We tested our linear regression model with the new Cambridge dataset and obtained a correlation of 0.503 between prediction and observation. </p>
<p>We also tested our logistic regression model with the new Cambridge dataset. We achieved an accuracy of 92.03% (185 out of 201 restaurants) with our logistic regression model predictions!!!</p>
<p>The following map shows whether we our model was able to correctly predicted if a restaurant's rating was >=4.5 stars. Green was a correct prediction, and red was an incorrect prediction. </p>
<img src="https://raw.githubusercontent.com/xud777/Bio260_final_project/gh-pages/images/Map_Prediction.png" alt="Map_Prediction">

<h3>
<a id="Conclusion" class="anchor" href="#Conclusion" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Conclusion</h3>
<p>In conclusion, we started this project wanting to understand the contributors to Yelp user ratings and find ways to predict ratings through modeling.</p>
<p>We scrapped, wrangled and explored the data of a total of 1,201 restaurants in Boston and Cambridge. We also visualized how the restaurant ratings were distributed geographically in Boston.</p>
<p>Next, we constructed a linear model to predicted the continous rating score from Yelp and was able to obtain a 0.634 correlation to training (Boston) data and 0.503 correlation to the test (Cambridge) data. Our explanatory variables account for 40.3% of the variations in the data.</p>
<p>Finally, we contructed a logistic regression model to predict the calculated yelp categorical scores (rounded to 0.5), and we obtained 86.6% accuracy with training data and 92.03% accuracy with the test data.</p>

<h3>
<a id="Discussion" class="anchor" href="#Discussion" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Discussion</h3>
<p>Using our logistic regression models, a new restaurant is able to predict whether it will be rated above 4.5 with approximately 90% accuracy by simply using its attribute data. We offered a powerful way for restaurants to examine how they could potentially improve their user ratings by changing their attributes such as whether to serve alcohol or have a noisy ambience.</p>
<p>Some of the key limitations we saw were the roles of page number and total number of raters. Page number was a significant predictor of Yelp ratings, which we hypothesize is due to Yelp displaying higher rated restaurant earlier in its search algorithm. Thus, it would be a major confounder in our explanatory model.</p>
<p>We have also observed that restaurants with higher number of raters tend to have medium ratings, which suggests that taking a greater sample size will produce closer-to-average results.</p>
<p>Lastly, we were not able to obtain price data and did not use open hour data in our analysis. We believe incorporating these data points could improve the explanatory power of our model.</p>
<h3>
<a id="Acknowledgement" class="anchor" href="#Acknowledgement" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Acknowledgement</h3>
<p>Thank you very much for a great course. We learned a lot, and we appreciate the hard work the course staff have devoted to educating us in the magic of data science. </p>
<p><i>Shihao Zhu & Zhi Dong</i></p>



      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/xud777/Bio260_final_project">Analysis of Yelp Reviews</a> is maintained by <a href="https://github.com/xud777">xud777</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
